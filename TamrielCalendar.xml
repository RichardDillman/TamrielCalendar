<GuiXml>
    <Controls>
        <!--
            TamrielCalendar.xml
            UI definitions for the calendar addon

            Main structures:
            - Virtual Templates (reusable components)
            - Main Calendar Window
            - Event Form Dialog
        -->

        <!-- ================================================== -->
        <!-- VIRTUAL TEMPLATES                                   -->
        <!-- ================================================== -->

        <!-- Day Cell Template (Month View) -->
        <Control name="TamCal_DayCell_Template" virtual="true">
            <Dimensions x="92" y="52"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="1"/>
                </Backdrop>
                <Label name="$(parent)DayNum" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" offsetX="4" offsetY="2"/>
                </Label>
                <Control name="$(parent)Events">
                    <Anchor point="TOPLEFT" offsetX="2" offsetY="16"/>
                    <Anchor point="BOTTOMRIGHT" offsetX="-2" offsetY="-2"/>
                    <!-- EventPips added dynamically -->
                </Control>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnDayCellMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnDayCellMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnDayCellClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Event Pip Template (small event indicator) -->
        <Control name="TamCal_EventPip_Template" virtual="true">
            <Dimensions y="14"/>
            <Controls>
                <Backdrop name="$(parent)BG" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="1"/>
                </Backdrop>
                <Label name="$(parent)Title" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" offsetX="4"/>
                    <Anchor point="RIGHT" offsetX="-2"/>
                </Label>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnEventPipMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnEventPipMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnEventPipClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Hour Row Template (Week/Day View) -->
        <Control name="TamCal_HourRow_Template" virtual="true">
            <Dimensions y="30"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>
                <Label name="$(parent)TimeLabel" font="ZoFontGameSmall" horizontalAlignment="RIGHT" verticalAlignment="TOP">
                    <Dimensions x="40"/>
                    <Anchor point="TOPLEFT" offsetX="2" offsetY="2"/>
                </Label>
                <Control name="$(parent)Cells">
                    <Anchor point="TOPLEFT" offsetX="44"/>
                    <Anchor point="BOTTOMRIGHT"/>
                </Control>
            </Controls>
        </Control>

        <!-- Event Block Template (Week/Day View) -->
        <Control name="TamCal_EventBlock_Template" virtual="true">
            <Dimensions y="28"/>
            <Controls>
                <Backdrop name="$(parent)BG" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="2"/>
                </Backdrop>
                <Label name="$(parent)Title" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" offsetX="4" offsetY="2"/>
                    <Anchor point="TOPRIGHT" offsetX="-4"/>
                </Label>
                <Label name="$(parent)Time" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" to="$(parent)Title" relativeTo="BOTTOMLEFT"/>
                    <Anchor point="RIGHT" offsetX="-4"/>
                </Label>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnEventBlockMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnEventBlockMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnEventBlockClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Guild Tag Template (Guild Panel) -->
        <Control name="TamCal_GuildTag_Template" virtual="true">
            <Dimensions y="24"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>
                <Label name="$(parent)Check" font="ZoFontGameSmall" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="">
                    <Dimensions x="20" y="20"/>
                    <Anchor point="LEFT" offsetX="4"/>
                </Label>
                <Texture name="$(parent)ColorDot" textureFile="EsoUI/Art/Miscellaneous/Gamepad/gp_charNameIcon.dds">
                    <Dimensions x="10" y="10"/>
                    <Anchor point="LEFT" offsetX="26"/>
                </Texture>
                <Label name="$(parent)Name" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" offsetX="40"/>
                    <Anchor point="RIGHT" offsetX="-4"/>
                </Label>
            </Controls>
            <OnMouseUp>
                TamrielCalendar:OnGuildTagClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Legend Item Template -->
        <Control name="TamCal_LegendItem_Template" virtual="true">
            <Dimensions x="100" y="18"/>
            <Controls>
                <Texture name="$(parent)ColorBox">
                    <Dimensions x="12" y="12"/>
                    <Anchor point="LEFT" offsetX="4" offsetY="0"/>
                </Texture>
                <Label name="$(parent)Label" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" to="$(parent)ColorBox" relativeTo="RIGHT" offsetX="6"/>
                    <Anchor point="RIGHT"/>
                </Label>
            </Controls>
        </Control>

        <!-- ================================================== -->
        <!-- MAIN CALENDAR WINDOW                                -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalWindow" hidden="true" clampedToScreen="true" movable="true" mouseEnabled="true">
            <Dimensions x="720" y="560"/>
            <Anchor point="CENTER"/>

            <OnMoveStop>
                TamrielCalendar:OnWindowMoveStop(self)
            </OnMoveStop>

            <Controls>
                <!-- Background -->
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- ============================================ -->
                <!-- ROW 1: Title + Close (Y: 0-44)               -->
                <!-- ============================================ -->
                <Control name="$(parent)Header">
                    <Dimensions x="720" y="44"/>
                    <Anchor point="TOPLEFT" offsetX="0" offsetY="0"/>

                    <Controls>
                        <!-- Title - Centered -->
                        <Label name="$(parent)Title" font="ZoFontWinH1" color="D4AF37" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="Tamriel Calendar">
                            <Anchor point="CENTER"/>
                        </Label>

                        <!-- Close Button - Far Right -->
                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideCalendar()
                            </OnClicked>
                        </Button>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- ROW 2: Nav buttons (Y: 48-88)                -->
                <!-- ============================================ -->
                <Control name="$(parent)NavBar">
                    <Dimensions x="704" y="40"/>
                    <Anchor point="TOPLEFT" offsetX="8" offsetY="48"/>

                    <Controls>
                        <!-- Sync Button -->
                        <Button name="$(parent)SyncBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="60" y="30"/>
                            <Anchor point="LEFT" offsetX="0"/>
                            <OnClicked>
                                TamrielCalendar:OnSyncClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Sync" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Prev Month Button -->
                        <Button name="$(parent)PrevBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="60" y="30"/>
                            <Anchor point="LEFT" to="$(parent)SyncBtn" relativeTo="RIGHT" offsetX="8"/>
                            <OnClicked>
                                TamrielCalendar:OnPrevClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="&lt; Prev" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Month Year Label - Centered -->
                        <Label name="$(parent)PeriodLabel" font="ZoFontWinH2" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="December 2025">
                            <Anchor point="CENTER"/>
                        </Label>

                        <!-- Today Button -->
                        <Button name="$(parent)TodayBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="60" y="30"/>
                            <Anchor point="LEFT" to="$(parent)PeriodLabel" relativeTo="RIGHT" offsetX="12"/>
                            <OnClicked>
                                TamrielCalendar:GoToToday()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Today" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Next Button -->
                        <Button name="$(parent)NextBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="60" y="30"/>
                            <Anchor point="LEFT" to="$(parent)TodayBtn" relativeTo="RIGHT" offsetX="4"/>
                            <OnClicked>
                                TamrielCalendar:OnNextClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Next &gt;" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- New Event Button - Far Right -->
                        <Button name="$(parent)NewEventBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="90" y="30"/>
                            <Anchor point="RIGHT" offsetX="0"/>
                            <OnClicked>
                                TamrielCalendar:OnNewEventClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="+ New Event" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Month View Button - Anchored from right side -->
                        <Button name="$(parent)MonthBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="60" y="30"/>
                            <Anchor point="RIGHT" to="$(parent)NewEventBtn" relativeTo="LEFT" offsetX="-8"/>
                            <OnClicked>
                                TamrielCalendar:OnMonthViewClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Month" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- CALENDAR GRID AREA (Y: 96 to 510)            -->
                <!-- ============================================ -->
                <Control name="$(parent)Content">
                    <Dimensions x="704" y="414"/>
                    <Anchor point="TOPLEFT" offsetX="8" offsetY="96"/>

                    <Controls>
                        <!-- Month View -->
                        <Control name="$(parent)MonthView" hidden="false">
                            <AnchorFill/>

                            <Controls>
                                <!-- Weekday Header Row -->
                                <Control name="$(parent)WeekdayHeader">
                                    <Dimensions y="24"/>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="TOPRIGHT"/>
                                    <!-- 7 weekday labels created dynamically -->
                                </Control>

                                <!-- Month Grid (42 cells) -->
                                <Control name="$(parent)Grid">
                                    <Anchor point="TOPLEFT" to="$(parent)WeekdayHeader" relativeTo="BOTTOMLEFT" offsetY="2"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                    <!-- 42 DayCell controls created dynamically -->
                                </Control>
                            </Controls>
                        </Control>

                        <!-- Week View -->
                        <Control name="$(parent)WeekView" hidden="true">
                            <AnchorFill/>

                            <Controls>
                                <!-- Week Header (blank + 7 day columns) -->
                                <Control name="$(parent)Header">
                                    <Dimensions y="28"/>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="TOPRIGHT"/>
                                </Control>

                                <!-- Hour Grid -->
                                <Control name="$(parent)Grid">
                                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetY="2"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                </Control>
                            </Controls>
                        </Control>

                        <!-- Day View -->
                        <Control name="$(parent)DayView" hidden="true">
                            <AnchorFill/>

                            <Controls>
                                <!-- Day Header -->
                                <Label name="$(parent)DayHeader" font="ZoFontWinH3" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                                    <Dimensions x="500" y="32"/>
                                    <Anchor point="TOPLEFT" offsetX="0" offsetY="0"/>
                                </Label>

                                <!-- Schedule Area - explicitly positioned below header -->
                                <Control name="$(parent)Schedule">
                                    <Anchor point="TOPLEFT" offsetX="0" offsetY="36"/>
                                    <Anchor point="BOTTOMRIGHT" offsetX="-200" offsetY="0"/>
                                </Control>

                                <!-- Sidebar - explicitly positioned -->
                                <Control name="$(parent)Sidebar">
                                    <Dimensions x="190"/>
                                    <Anchor point="TOPRIGHT" offsetX="0" offsetY="36"/>
                                    <Anchor point="BOTTOMRIGHT" offsetX="0" offsetY="0"/>

                                    <Controls>
                                        <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                                            <AnchorFill/>
                                        </Backdrop>

                                        <Label name="$(parent)Title" font="ZoFontWinH4" text="Event Details">
                                            <Dimensions y="20"/>
                                            <Anchor point="TOPLEFT" offsetX="8" offsetY="8"/>
                                            <Anchor point="TOPRIGHT" offsetX="-8"/>
                                        </Label>

                                        <Control name="$(parent)Details">
                                            <Anchor point="TOPLEFT" offsetX="8" offsetY="32"/>
                                            <Anchor point="BOTTOMRIGHT" offsetX="-8" offsetY="-8"/>
                                        </Control>
                                    </Controls>
                                </Control>
                            </Controls>
                        </Control>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- LEGEND ROW (Y: 516-552)                      -->
                <!-- ============================================ -->
                <Control name="$(parent)Legend">
                    <Dimensions x="704" y="36"/>
                    <Anchor point="TOPLEFT" offsetX="8" offsetY="516"/>

                    <Controls>
                        <!-- Personal events icon -->
                        <Control name="$(parent)PersonalItem">
                            <Dimensions x="90" y="24"/>
                            <Anchor point="LEFT" offsetX="0"/>
                            <Controls>
                                <Texture name="$(parent)Icon" textureFile="EsoUI/Art/Miscellaneous/bullet.dds" color="4A90D9">
                                    <Dimensions x="14" y="14"/>
                                    <Anchor point="LEFT"/>
                                </Texture>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Personal" color="CCCCCC">
                                    <Anchor point="LEFT" to="$(parent)Icon" relativeTo="RIGHT" offsetX="4"/>
                                </Label>
                            </Controls>
                        </Control>

                        <!-- Guild items container (populated dynamically) -->
                        <Control name="$(parent)GuildItems">
                            <Dimensions y="24"/>
                            <Anchor point="LEFT" to="$(parent)PersonalItem" relativeTo="RIGHT" offsetX="12"/>
                            <Anchor point="RIGHT"/>
                        </Control>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

        <!-- ================================================== -->
        <!-- EVENT FORM DIALOG                                   -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalEventForm" hidden="true" clampedToScreen="true" movable="true" mouseEnabled="true" level="2">
            <Dimensions x="400" y="380"/>
            <Anchor point="CENTER"/>

            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- ============================================ -->
                <!-- ROW 1: "Create Event" centered + Close X     -->
                <!-- ============================================ -->
                <Control name="$(parent)Header">
                    <Dimensions y="44"/>
                    <Anchor point="TOPLEFT"/>
                    <Anchor point="TOPRIGHT"/>

                    <Controls>
                        <Label name="$(parent)Title" font="ZoFontWinH1" color="D4AF37" text="Create Event" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                            <Anchor point="CENTER"/>
                        </Label>

                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideEventForm()
                            </OnClicked>
                        </Button>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- FORM CONTENT                                 -->
                <!-- ============================================ -->
                <Control name="$(parent)Content">
                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetX="20" offsetY="8"/>
                    <Anchor point="BOTTOMRIGHT" offsetX="-20" offsetY="-60"/>

                    <Controls>
                        <!-- ========== TITLE ========== -->
                        <Label name="$(parent)TitleLabel" font="ZoFontGame" text="Title:" color="C5A552">
                            <Dimensions y="20"/>
                            <Anchor point="TOPLEFT"/>
                        </Label>
                        <Backdrop name="$(parent)TitleBG" inherits="ZO_EditBackdrop">
                            <Dimensions y="32"/>
                            <Anchor point="TOPLEFT" to="$(parent)TitleLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="RIGHT"/>
                        </Backdrop>
                        <EditBox name="$(parent)TitleInput" inherits="ZO_DefaultEditForBackdrop">
                            <Anchor point="TOPLEFT" to="$(parent)TitleBG" offsetX="8" offsetY="4"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)TitleBG" offsetX="-8" offsetY="-4"/>
                        </EditBox>

                        <!-- ========== DESCRIPTION (4 rows) ========== -->
                        <Label name="$(parent)DescLabel" font="ZoFontGame" text="Description:" color="C5A552">
                            <Dimensions y="20"/>
                            <Anchor point="TOPLEFT" to="$(parent)TitleBG" relativeTo="BOTTOMLEFT" offsetY="12"/>
                        </Label>
                        <Backdrop name="$(parent)DescBG" inherits="ZO_EditBackdrop">
                            <Dimensions y="88"/>
                            <Anchor point="TOPLEFT" to="$(parent)DescLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="RIGHT"/>
                        </Backdrop>
                        <EditBox name="$(parent)DescInput" inherits="ZO_DefaultEditForBackdrop" multiLine="true">
                            <Anchor point="TOPLEFT" to="$(parent)DescBG" offsetX="8" offsetY="4"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)DescBG" offsetX="-8" offsetY="-4"/>
                        </EditBox>

                        <!-- ========== TIME (dropdowns) ========== -->
                        <Label name="$(parent)TimeLabel" font="ZoFontGame" text="Time:" color="C5A552">
                            <Dimensions y="20"/>
                            <Anchor point="TOPLEFT" to="$(parent)DescBG" relativeTo="BOTTOMLEFT" offsetY="12"/>
                        </Label>

                        <!-- Time row: [Hour dropdown] : [Minute dropdown] : [AM/PM dropdown] -->
                        <Control name="$(parent)TimeRow">
                            <Dimensions y="32"/>
                            <Anchor point="TOPLEFT" to="$(parent)TimeLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="RIGHT"/>

                            <Controls>
                                <!-- Hour Dropdown -->
                                <ComboBox name="$(parent)HourDropdown" inherits="ZO_ComboBox">
                                    <Dimensions x="70" y="30"/>
                                    <Anchor point="LEFT"/>
                                </ComboBox>

                                <!-- Colon separator -->
                                <Label name="$(parent)Sep1" font="ZoFontWinH3" text=":" color="C5A552" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <Dimensions x="16" y="30"/>
                                    <Anchor point="LEFT" to="$(parent)HourDropdown" relativeTo="RIGHT" offsetX="4"/>
                                </Label>

                                <!-- Minute Dropdown -->
                                <ComboBox name="$(parent)MinuteDropdown" inherits="ZO_ComboBox">
                                    <Dimensions x="70" y="30"/>
                                    <Anchor point="LEFT" to="$(parent)Sep1" relativeTo="RIGHT" offsetX="4"/>
                                </ComboBox>

                                <!-- Colon separator -->
                                <Label name="$(parent)Sep2" font="ZoFontWinH3" text=":" color="C5A552" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <Dimensions x="16" y="30"/>
                                    <Anchor point="LEFT" to="$(parent)MinuteDropdown" relativeTo="RIGHT" offsetX="4"/>
                                </Label>

                                <!-- AM/PM Dropdown -->
                                <ComboBox name="$(parent)AmPmDropdown" inherits="ZO_ComboBox">
                                    <Dimensions x="65" y="30"/>
                                    <Anchor point="LEFT" to="$(parent)Sep2" relativeTo="RIGHT" offsetX="4"/>
                                </ComboBox>
                            </Controls>
                        </Control>

                        <!-- Server Time Note -->
                        <Label name="$(parent)ServerTimeNote" font="ZoFontGameSmall" text="(All times are in server time)" color="888888">
                            <Dimensions y="16"/>
                            <Anchor point="TOPLEFT" to="$(parent)TimeRow" relativeTo="BOTTOMLEFT" offsetY="6"/>
                        </Label>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- ACTION BUTTONS: [Cancel] ... [Save Event]   -->
                <!-- ============================================ -->
                <Control name="$(parent)Actions">
                    <Dimensions y="52"/>
                    <Anchor point="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT"/>

                    <Controls>
                        <Button name="$(parent)CancelBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="100" y="34"/>
                            <Anchor point="LEFT" offsetX="20"/>
                            <OnClicked>
                                TamrielCalendar:HideEventForm()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Cancel" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)SaveBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="100" y="34"/>
                            <Anchor point="RIGHT" offsetX="-20"/>
                            <OnClicked>
                                TamrielCalendar:OnEventFormSave()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Save Event" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

        <!-- ================================================== -->
        <!-- SIGN-UP DIALOG (for guild events)                   -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalSignUpDialog" hidden="true" clampedToScreen="true" mouseEnabled="true">
            <Dimensions x="320" y="280"/>
            <Anchor point="CENTER"/>

            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- Header -->
                <Control name="$(parent)Header">
                    <Dimensions y="40"/>
                    <Anchor point="TOPLEFT"/>
                    <Anchor point="TOPRIGHT"/>

                    <Controls>
                        <Label name="$(parent)Title" font="ZoFontWinH3" color="D4AF37" text="Sign Up">
                            <Anchor point="LEFT" offsetX="16"/>
                        </Label>

                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideSignUpDialog()
                            </OnClicked>
                        </Button>
                    </Controls>
                </Control>

                <!-- Event Info -->
                <Label name="$(parent)EventTitle" font="ZoFontWinH4">
                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetX="16" offsetY="8"/>
                    <Anchor point="TOPRIGHT" to="$(parent)Header" relativeTo="BOTTOMRIGHT" offsetX="-16"/>
                </Label>

                <Label name="$(parent)EventTime" font="ZoFontGameSmall" color="C5A552">
                    <Anchor point="TOPLEFT" to="$(parent)EventTitle" relativeTo="BOTTOMLEFT" offsetY="4"/>
                </Label>

                <!-- Role Selection -->
                <Label name="$(parent)RoleLabel" font="ZoFontGameSmall" text="Select your role:">
                    <Anchor point="TOPLEFT" to="$(parent)EventTime" relativeTo="BOTTOMLEFT" offsetY="16"/>
                </Label>

                <Control name="$(parent)RoleButtons">
                    <Anchor point="TOPLEFT" to="$(parent)RoleLabel" relativeTo="BOTTOMLEFT" offsetY="8"/>
                    <Anchor point="TOPRIGHT" to="$(parent)RoleLabel" relativeTo="BOTTOMRIGHT"/>
                    <Dimensions y="90"/>

                    <Controls>
                        <Button name="$(parent)TankBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("Tank")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Tank" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)HealerBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT" to="$(parent)TankBtn" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("Healer")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Healer" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)DPSBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT" to="$(parent)HealerBtn" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("DPS")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="DPS" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>

                <!-- Action Buttons -->
                <Control name="$(parent)Actions">
                    <Dimensions y="40"/>
                    <Anchor point="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT"/>

                    <Controls>
                        <Button name="$(parent)CancelBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="80" y="28"/>
                            <Anchor point="CENTER"/>
                            <OnClicked>
                                TamrielCalendar:HideSignUpDialog()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Cancel" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

    </Controls>
</GuiXml>
