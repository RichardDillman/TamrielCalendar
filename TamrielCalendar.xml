<GuiXml>
    <Controls>
        <!--
            TamrielCalendar.xml
            UI definitions for the calendar addon

            Main structures:
            - Virtual Templates (reusable components)
            - Main Calendar Window
            - Event Form Dialog
        -->

        <!-- ================================================== -->
        <!-- VIRTUAL TEMPLATES                                   -->
        <!-- ================================================== -->

        <!-- Day Cell Template (Month View) -->
        <Control name="TamCal_DayCell_Template" virtual="true">
            <Dimensions x="92" y="52"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="1"/>
                </Backdrop>
                <Label name="$(parent)DayNum" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" offsetX="4" offsetY="2"/>
                </Label>
                <Control name="$(parent)Events">
                    <Anchor point="TOPLEFT" offsetX="2" offsetY="16"/>
                    <Anchor point="BOTTOMRIGHT" offsetX="-2" offsetY="-2"/>
                    <!-- EventPips added dynamically -->
                </Control>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnDayCellMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnDayCellMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnDayCellClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Event Pip Template (small event indicator) -->
        <Control name="TamCal_EventPip_Template" virtual="true">
            <Dimensions y="14"/>
            <Controls>
                <Backdrop name="$(parent)BG" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="1"/>
                </Backdrop>
                <Label name="$(parent)Title" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" offsetX="4"/>
                    <Anchor point="RIGHT" offsetX="-2"/>
                </Label>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnEventPipMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnEventPipMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnEventPipClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Hour Row Template (Week/Day View) -->
        <Control name="TamCal_HourRow_Template" virtual="true">
            <Dimensions y="30"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>
                <Label name="$(parent)TimeLabel" font="ZoFontGameSmall" horizontalAlignment="RIGHT" verticalAlignment="TOP">
                    <Dimensions x="40"/>
                    <Anchor point="TOPLEFT" offsetX="2" offsetY="2"/>
                </Label>
                <Control name="$(parent)Cells">
                    <Anchor point="TOPLEFT" offsetX="44"/>
                    <Anchor point="BOTTOMRIGHT"/>
                </Control>
            </Controls>
        </Control>

        <!-- Event Block Template (Week/Day View) -->
        <Control name="TamCal_EventBlock_Template" virtual="true">
            <Dimensions y="28"/>
            <Controls>
                <Backdrop name="$(parent)BG" tier="LOW">
                    <AnchorFill/>
                    <Edge edgeSize="2"/>
                </Backdrop>
                <Label name="$(parent)Title" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" offsetX="4" offsetY="2"/>
                    <Anchor point="TOPRIGHT" offsetX="-4"/>
                </Label>
                <Label name="$(parent)Time" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="TOP">
                    <Anchor point="TOPLEFT" to="$(parent)Title" relativeTo="BOTTOMLEFT"/>
                    <Anchor point="RIGHT" offsetX="-4"/>
                </Label>
            </Controls>
            <OnMouseEnter>
                TamrielCalendar:OnEventBlockMouseEnter(self)
            </OnMouseEnter>
            <OnMouseExit>
                TamrielCalendar:OnEventBlockMouseExit(self)
            </OnMouseExit>
            <OnMouseUp>
                TamrielCalendar:OnEventBlockClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Guild Tag Template (Guild Panel) -->
        <Control name="TamCal_GuildTag_Template" virtual="true">
            <Dimensions y="24"/>
            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>
                <Label name="$(parent)Check" font="ZoFontGameSmall" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="">
                    <Dimensions x="20" y="20"/>
                    <Anchor point="LEFT" offsetX="4"/>
                </Label>
                <Texture name="$(parent)ColorDot" textureFile="EsoUI/Art/Miscellaneous/Gamepad/gp_charNameIcon.dds">
                    <Dimensions x="10" y="10"/>
                    <Anchor point="LEFT" offsetX="26"/>
                </Texture>
                <Label name="$(parent)Name" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" offsetX="40"/>
                    <Anchor point="RIGHT" offsetX="-4"/>
                </Label>
            </Controls>
            <OnMouseUp>
                TamrielCalendar:OnGuildTagClicked(self, button)
            </OnMouseUp>
        </Control>

        <!-- Legend Item Template -->
        <Control name="TamCal_LegendItem_Template" virtual="true">
            <Dimensions x="100" y="18"/>
            <Controls>
                <Texture name="$(parent)ColorBox">
                    <Dimensions x="12" y="12"/>
                    <Anchor point="LEFT" offsetX="4" offsetY="0"/>
                </Texture>
                <Label name="$(parent)Label" font="ZoFontGameSmall" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                    <Anchor point="LEFT" to="$(parent)ColorBox" relativeTo="RIGHT" offsetX="6"/>
                    <Anchor point="RIGHT"/>
                </Label>
            </Controls>
        </Control>

        <!-- ================================================== -->
        <!-- MAIN CALENDAR WINDOW                                -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalWindow" hidden="true" clampedToScreen="true" movable="true" mouseEnabled="true">
            <Dimensions x="720" y="620"/>
            <Anchor point="CENTER"/>

            <OnMoveStop>
                TamrielCalendar:OnWindowMoveStop(self)
            </OnMoveStop>

            <Controls>
                <!-- Background -->
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- ============================================ -->
                <!-- TOP HEADER SECTION (Title + Close Button)    -->
                <!-- ============================================ -->
                <Control name="$(parent)Header">
                    <Dimensions y="48"/>
                    <Anchor point="TOPLEFT" offsetX="0" offsetY="0"/>
                    <Anchor point="TOPRIGHT" offsetX="0" offsetY="0"/>

                    <Controls>
                        <!-- Main Title - Centered -->
                        <Label name="$(parent)Title" font="ZoFontWinH1" color="D4AF37" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="Tamriel Calendar">
                            <Anchor point="CENTER" offsetY="4"/>
                        </Label>

                        <!-- Close Button -->
                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideCalendar()
                            </OnClicked>
                        </Button>

                        <!-- Settings Button -->
                        <Button name="$(parent)SettingsBtn">
                            <Dimensions x="28" y="28"/>
                            <Anchor point="RIGHT" to="$(parent)Close" relativeTo="LEFT" offsetX="-4"/>
                            <OnClicked>
                                TamrielCalendar:OnSettingsClicked()
                            </OnClicked>
                            <Controls>
                                <Texture name="$(parent)Icon" textureFile="EsoUI/Art/MainMenu/menuBar_settings_up.dds">
                                    <AnchorFill/>
                                </Texture>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- NAVIGATION BAR (Month/Year + Nav + Views)    -->
                <!-- ============================================ -->
                <Control name="$(parent)NavBar">
                    <Dimensions y="48"/>
                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetX="8"/>
                    <Anchor point="TOPRIGHT" to="$(parent)Header" relativeTo="BOTTOMRIGHT" offsetX="-8"/>

                    <Controls>
                        <!-- Nav Background/Separator -->
                        <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                            <AnchorFill/>
                            <Edge edgeSize="1"/>
                        </Backdrop>

                        <!-- Prev Month Button -->
                        <Button name="$(parent)PrevBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="36" y="32"/>
                            <Anchor point="LEFT" offsetX="8" offsetY="0"/>
                            <OnClicked>
                                TamrielCalendar:OnPrevClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontWinH3" text="◄" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Today Button -->
                        <Button name="$(parent)TodayBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="70" y="32"/>
                            <Anchor point="LEFT" to="$(parent)PrevBtn" relativeTo="RIGHT" offsetX="6"/>
                            <OnClicked>
                                TamrielCalendar:GoToToday()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="Today">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Next Month Button -->
                        <Button name="$(parent)NextBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="36" y="32"/>
                            <Anchor point="LEFT" to="$(parent)TodayBtn" relativeTo="RIGHT" offsetX="6"/>
                            <OnClicked>
                                TamrielCalendar:OnNextClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontWinH3" text="►" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Period Label (e.g., "December 2025") - Large and prominent -->
                        <Label name="$(parent)PeriodLabel" font="ZoFontWinH2" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER" text="December 2025">
                            <Anchor point="CENTER" offsetX="0" offsetY="0"/>
                        </Label>

                        <!-- View Toggle Buttons (Day / Week / Month) -->
                        <Control name="$(parent)ViewToggles">
                            <Dimensions x="180" y="32"/>
                            <Anchor point="RIGHT" offsetX="-8"/>

                            <Controls>
                                <Button name="$(parent)DayBtn" inherits="ZO_DefaultButton">
                                    <Dimensions x="54" y="32"/>
                                    <Anchor point="LEFT"/>
                                    <OnClicked>
                                        TamrielCalendar:SetView(TamrielCalendar.VIEW_MODES.DAY)
                                    </OnClicked>
                                    <Controls>
                                        <Label name="$(parent)Label" font="ZoFontGame" text="Day" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                            <AnchorFill/>
                                        </Label>
                                    </Controls>
                                </Button>

                                <Button name="$(parent)WeekBtn" inherits="ZO_DefaultButton">
                                    <Dimensions x="58" y="32"/>
                                    <Anchor point="LEFT" to="$(parent)DayBtn" relativeTo="RIGHT" offsetX="4"/>
                                    <OnClicked>
                                        TamrielCalendar:SetView(TamrielCalendar.VIEW_MODES.WEEK)
                                    </OnClicked>
                                    <Controls>
                                        <Label name="$(parent)Label" font="ZoFontGame" text="Week" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                            <AnchorFill/>
                                        </Label>
                                    </Controls>
                                </Button>

                                <Button name="$(parent)MonthBtn" inherits="ZO_DefaultButton">
                                    <Dimensions x="60" y="32"/>
                                    <Anchor point="LEFT" to="$(parent)WeekBtn" relativeTo="RIGHT" offsetX="4"/>
                                    <OnClicked>
                                        TamrielCalendar:SetView(TamrielCalendar.VIEW_MODES.MONTH)
                                    </OnClicked>
                                    <Controls>
                                        <Label name="$(parent)Label" font="ZoFontGame" text="Month" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                            <AnchorFill/>
                                        </Label>
                                    </Controls>
                                </Button>
                            </Controls>
                        </Control>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- CONTENT AREA (Calendar Views)                -->
                <!-- ============================================ -->
                <Control name="$(parent)Content">
                    <Anchor point="TOPLEFT" to="$(parent)NavBar" relativeTo="BOTTOMLEFT" offsetX="0" offsetY="8"/>
                    <Anchor point="BOTTOMRIGHT" offsetX="-8" offsetY="-110"/>

                    <Controls>
                        <!-- Month View -->
                        <Control name="$(parent)MonthView" hidden="false">
                            <AnchorFill/>

                            <Controls>
                                <!-- Weekday Header Row -->
                                <Control name="$(parent)WeekdayHeader">
                                    <Dimensions y="24"/>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="TOPRIGHT"/>
                                    <!-- 7 weekday labels created dynamically -->
                                </Control>

                                <!-- Month Grid (42 cells) -->
                                <Control name="$(parent)Grid">
                                    <Anchor point="TOPLEFT" to="$(parent)WeekdayHeader" relativeTo="BOTTOMLEFT" offsetY="2"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                    <!-- 42 DayCell controls created dynamically -->
                                </Control>
                            </Controls>
                        </Control>

                        <!-- Week View -->
                        <Control name="$(parent)WeekView" hidden="true">
                            <AnchorFill/>

                            <Controls>
                                <!-- Week Header (blank + 7 day columns) -->
                                <Control name="$(parent)Header">
                                    <Dimensions y="28"/>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="TOPRIGHT"/>
                                </Control>

                                <!-- Hour Grid -->
                                <Control name="$(parent)Grid">
                                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetY="2"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                </Control>
                            </Controls>
                        </Control>

                        <!-- Day View -->
                        <Control name="$(parent)DayView" hidden="true">
                            <AnchorFill/>

                            <Controls>
                                <!-- Day Header -->
                                <Label name="$(parent)DayHeader" font="ZoFontWinH3" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                                    <Dimensions y="32"/>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="TOPRIGHT"/>
                                </Label>

                                <!-- Schedule Area -->
                                <Control name="$(parent)Schedule">
                                    <Anchor point="TOPLEFT" to="$(parent)DayHeader" relativeTo="BOTTOMLEFT" offsetY="4"/>
                                    <Anchor point="BOTTOMRIGHT" offsetX="-200"/>
                                </Control>

                                <!-- Sidebar -->
                                <Control name="$(parent)Sidebar">
                                    <Dimensions x="190"/>
                                    <Anchor point="TOPRIGHT" to="$(parent)DayHeader" relativeTo="BOTTOMRIGHT" offsetY="4"/>
                                    <Anchor point="BOTTOMRIGHT"/>

                                    <Controls>
                                        <Backdrop name="$(parent)BG" inherits="ZO_ThinBackdrop" tier="LOW">
                                            <AnchorFill/>
                                        </Backdrop>

                                        <Label name="$(parent)Title" font="ZoFontWinH4" text="Event Details">
                                            <Anchor point="TOPLEFT" offsetX="8" offsetY="8"/>
                                        </Label>

                                        <Control name="$(parent)Details">
                                            <Anchor point="TOPLEFT" to="$(parent)Title" relativeTo="BOTTOMLEFT" offsetY="8"/>
                                            <Anchor point="BOTTOMRIGHT" offsetX="-8" offsetY="-8"/>
                                        </Control>
                                    </Controls>
                                </Control>
                            </Controls>
                        </Control>
                    </Controls>
                </Control>

                <!-- Guild Calendars Panel -->
                <Control name="$(parent)GuildPanel">
                    <Dimensions y="60"/>
                    <Anchor point="BOTTOMLEFT" offsetY="-40"/>
                    <Anchor point="BOTTOMRIGHT" offsetY="-40"/>

                    <Controls>
                        <!-- Section Header -->
                        <Label name="$(parent)Title" font="ZoFontGameSmall" color="8B7355" text="GUILD CALENDARS" horizontalAlignment="LEFT" verticalAlignment="CENTER">
                            <Anchor point="TOPLEFT" offsetX="8" offsetY="4"/>
                        </Label>

                        <!-- Sync Button -->
                        <Button name="$(parent)SyncBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="70" y="22"/>
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="2"/>
                            <OnClicked>
                                TamrielCalendar:OnSyncClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Sync" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <!-- Guild Tags Container (populated dynamically) -->
                        <Control name="$(parent)Tags">
                            <Anchor point="TOPLEFT" to="$(parent)Title" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="BOTTOMRIGHT" offsetX="-8" offsetY="-4"/>
                        </Control>
                    </Controls>
                </Control>

                <!-- Action Bar -->
                <Control name="$(parent)ActionBar">
                    <Dimensions y="40"/>
                    <Anchor point="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT"/>

                    <Controls>
                        <!-- New Event Button -->
                        <Button name="$(parent)NewEventBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="100" y="28"/>
                            <Anchor point="RIGHT" offsetX="-16"/>
                            <OnClicked>
                                TamrielCalendar:OnNewEventClicked()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="+ New Event" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

        <!-- ================================================== -->
        <!-- EVENT FORM DIALOG                                   -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalEventForm" hidden="true" clampedToScreen="true" movable="true" mouseEnabled="true" level="2">
            <Dimensions x="440" y="580"/>
            <Anchor point="CENTER"/>

            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- ============================================ -->
                <!-- HEADER (Title at top with clear space)       -->
                <!-- ============================================ -->
                <Control name="$(parent)Header">
                    <Dimensions y="52"/>
                    <Anchor point="TOPLEFT"/>
                    <Anchor point="TOPRIGHT"/>

                    <Controls>
                        <Label name="$(parent)Title" font="ZoFontWinH1" color="D4AF37" text="Create Event" horizontalAlignment="CENTER">
                            <Anchor point="CENTER" offsetY="4"/>
                        </Label>

                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideEventForm()
                            </OnClicked>
                        </Button>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- FORM CONTENT                                 -->
                <!-- ============================================ -->
                <Control name="$(parent)Content">
                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetX="20" offsetY="8"/>
                    <Anchor point="BOTTOMRIGHT" offsetX="-20" offsetY="-60"/>

                    <Controls>
                        <!-- ========== EVENT TITLE ========== -->
                        <Label name="$(parent)TitleLabel" font="ZoFontGame" text="Event Title" color="C5A552">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" offsetX="0" offsetY="0"/>
                        </Label>
                        <Backdrop name="$(parent)TitleBG" inherits="ZO_EditBackdrop">
                            <Dimensions y="32"/>
                            <Anchor point="TOPLEFT" to="$(parent)TitleLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="RIGHT"/>
                        </Backdrop>
                        <EditBox name="$(parent)TitleInput" inherits="ZO_DefaultEditForBackdrop">
                            <Anchor point="TOPLEFT" to="$(parent)TitleBG" offsetX="8" offsetY="4"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)TitleBG" offsetX="-8" offsetY="-4"/>
                        </EditBox>

                        <!-- ========== DESCRIPTION ========== -->
                        <Label name="$(parent)DescLabel" font="ZoFontGame" text="Description (optional)" color="C5A552">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" to="$(parent)TitleBG" relativeTo="BOTTOMLEFT" offsetY="12"/>
                        </Label>
                        <Backdrop name="$(parent)DescBG" inherits="ZO_EditBackdrop">
                            <Dimensions y="56"/>
                            <Anchor point="TOPLEFT" to="$(parent)DescLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <Anchor point="RIGHT"/>
                        </Backdrop>
                        <EditBox name="$(parent)DescInput" inherits="ZO_DefaultEditForBackdrop" multiLine="true">
                            <Anchor point="TOPLEFT" to="$(parent)DescBG" offsetX="8" offsetY="4"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)DescBG" offsetX="-8" offsetY="-4"/>
                        </EditBox>

                        <!-- ========== CATEGORY ========== -->
                        <Label name="$(parent)CategoryLabel" font="ZoFontGame" text="Category" color="C5A552">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" to="$(parent)DescBG" relativeTo="BOTTOMLEFT" offsetY="12"/>
                        </Label>
                        <Control name="$(parent)CategoryDropdown">
                            <Dimensions x="160" y="30"/>
                            <Anchor point="TOPLEFT" to="$(parent)CategoryLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Control>

                        <!-- ========== TRIAL DROPDOWN (Raid only) ========== -->
                        <Label name="$(parent)TrialLabel" font="ZoFontGame" text="Trial" color="C5A552" hidden="true">
                            <Dimensions y="18"/>
                            <Anchor point="LEFT" to="$(parent)CategoryLabel" relativeTo="RIGHT" offsetX="80"/>
                        </Label>
                        <Control name="$(parent)TrialDropdown" hidden="true">
                            <Dimensions x="140" y="30"/>
                            <Anchor point="TOPLEFT" to="$(parent)TrialLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Control>

                        <!-- ========== MODIFIER DROPDOWN (Raid only) ========== -->
                        <Label name="$(parent)ModifierLabel" font="ZoFontGame" text="Difficulty" color="C5A552" hidden="true">
                            <Dimensions y="18"/>
                            <Anchor point="LEFT" to="$(parent)TrialLabel" relativeTo="RIGHT" offsetX="60"/>
                        </Label>
                        <Control name="$(parent)ModifierDropdown" hidden="true">
                            <Dimensions x="100" y="30"/>
                            <Anchor point="TOPLEFT" to="$(parent)ModifierLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Control>

                        <!-- ========== START DATE/TIME ========== -->
                        <Label name="$(parent)StartLabel" font="ZoFontGame" text="Start Date &amp; Time" color="C5A552">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" to="$(parent)CategoryDropdown" relativeTo="BOTTOMLEFT" offsetY="14"/>
                        </Label>

                        <Backdrop name="$(parent)StartDateBG" inherits="ZO_EditBackdrop">
                            <Dimensions x="110" y="28"/>
                            <Anchor point="TOPLEFT" to="$(parent)StartLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Backdrop>
                        <Label name="$(parent)StartDateDisplay" font="ZoFontGame" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                            <Anchor point="TOPLEFT" to="$(parent)StartDateBG" offsetX="4" offsetY="2"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)StartDateBG" offsetX="-4" offsetY="-2"/>
                        </Label>

                        <Button name="$(parent)StartHourDown" inherits="ZO_DefaultButton">
                            <Dimensions x="28" y="28"/>
                            <Anchor point="LEFT" to="$(parent)StartDateBG" relativeTo="RIGHT" offsetX="12"/>
                            <OnClicked>TamrielCalendar:OnStartHourDown()</OnClicked>
                            <Controls><Label font="ZoFontWinH4" text="◄" horizontalAlignment="CENTER" verticalAlignment="CENTER"><AnchorFill/></Label></Controls>
                        </Button>
                        <Backdrop name="$(parent)StartTimeBG" inherits="ZO_EditBackdrop">
                            <Dimensions x="80" y="28"/>
                            <Anchor point="LEFT" to="$(parent)StartHourDown" relativeTo="RIGHT" offsetX="4"/>
                        </Backdrop>
                        <Label name="$(parent)StartTimeDisplay" font="ZoFontGame" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                            <Anchor point="TOPLEFT" to="$(parent)StartTimeBG" offsetX="4" offsetY="2"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)StartTimeBG" offsetX="-4" offsetY="-2"/>
                        </Label>
                        <Button name="$(parent)StartHourUp" inherits="ZO_DefaultButton">
                            <Dimensions x="28" y="28"/>
                            <Anchor point="LEFT" to="$(parent)StartTimeBG" relativeTo="RIGHT" offsetX="4"/>
                            <OnClicked>TamrielCalendar:OnStartHourUp()</OnClicked>
                            <Controls><Label font="ZoFontWinH4" text="►" horizontalAlignment="CENTER" verticalAlignment="CENTER"><AnchorFill/></Label></Controls>
                        </Button>

                        <!-- ========== END DATE/TIME ========== -->
                        <Label name="$(parent)EndLabel" font="ZoFontGame" text="End Date &amp; Time" color="C5A552">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" to="$(parent)StartDateBG" relativeTo="BOTTOMLEFT" offsetY="14"/>
                        </Label>

                        <Backdrop name="$(parent)EndDateBG" inherits="ZO_EditBackdrop">
                            <Dimensions x="110" y="28"/>
                            <Anchor point="TOPLEFT" to="$(parent)EndLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Backdrop>
                        <Label name="$(parent)EndDateDisplay" font="ZoFontGame" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                            <Anchor point="TOPLEFT" to="$(parent)EndDateBG" offsetX="4" offsetY="2"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)EndDateBG" offsetX="-4" offsetY="-2"/>
                        </Label>

                        <Button name="$(parent)EndHourDown" inherits="ZO_DefaultButton">
                            <Dimensions x="28" y="28"/>
                            <Anchor point="LEFT" to="$(parent)EndDateBG" relativeTo="RIGHT" offsetX="12"/>
                            <OnClicked>TamrielCalendar:OnEndHourDown()</OnClicked>
                            <Controls><Label font="ZoFontWinH4" text="◄" horizontalAlignment="CENTER" verticalAlignment="CENTER"><AnchorFill/></Label></Controls>
                        </Button>
                        <Backdrop name="$(parent)EndTimeBG" inherits="ZO_EditBackdrop">
                            <Dimensions x="80" y="28"/>
                            <Anchor point="LEFT" to="$(parent)EndHourDown" relativeTo="RIGHT" offsetX="4"/>
                        </Backdrop>
                        <Label name="$(parent)EndTimeDisplay" font="ZoFontGame" color="E8DCC8" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                            <Anchor point="TOPLEFT" to="$(parent)EndTimeBG" offsetX="4" offsetY="2"/>
                            <Anchor point="BOTTOMRIGHT" to="$(parent)EndTimeBG" offsetX="-4" offsetY="-2"/>
                        </Label>
                        <Button name="$(parent)EndHourUp" inherits="ZO_DefaultButton">
                            <Dimensions x="28" y="28"/>
                            <Anchor point="LEFT" to="$(parent)EndTimeBG" relativeTo="RIGHT" offsetX="4"/>
                            <OnClicked>TamrielCalendar:OnEndHourUp()</OnClicked>
                            <Controls><Label font="ZoFontWinH4" text="►" horizontalAlignment="CENTER" verticalAlignment="CENTER"><AnchorFill/></Label></Controls>
                        </Button>

                        <!-- ========== GUILD SELECTOR ========== -->
                        <Label name="$(parent)GuildLabel" font="ZoFontGame" text="Guild (optional)" color="C5A552" hidden="true">
                            <Dimensions y="18"/>
                            <Anchor point="TOPLEFT" to="$(parent)EndDateBG" relativeTo="BOTTOMLEFT" offsetY="14"/>
                        </Label>
                        <Control name="$(parent)GuildDropdown" hidden="true">
                            <Dimensions x="200" y="30"/>
                            <Anchor point="TOPLEFT" to="$(parent)GuildLabel" relativeTo="BOTTOMLEFT" offsetY="4"/>
                        </Control>
                    </Controls>
                </Control>

                <!-- ============================================ -->
                <!-- ACTION BUTTONS                               -->
                <!-- ============================================ -->
                <Control name="$(parent)Actions">
                    <Dimensions y="52"/>
                    <Anchor point="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT"/>

                    <Controls>
                        <Button name="$(parent)CancelBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="110" y="36"/>
                            <Anchor point="LEFT" offsetX="20"/>
                            <OnClicked>
                                TamrielCalendar:HideEventForm()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Cancel" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)SaveBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="110" y="36"/>
                            <Anchor point="RIGHT" offsetX="-20"/>
                            <OnClicked>
                                TamrielCalendar:OnEventFormSave()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGame" text="Save Event" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

        <!-- ================================================== -->
        <!-- SIGN-UP DIALOG (for guild events)                   -->
        <!-- ================================================== -->

        <TopLevelControl name="TamCalSignUpDialog" hidden="true" clampedToScreen="true" mouseEnabled="true">
            <Dimensions x="320" y="280"/>
            <Anchor point="CENTER"/>

            <Controls>
                <Backdrop name="$(parent)BG" inherits="ZO_DefaultBackdrop" tier="LOW">
                    <AnchorFill/>
                </Backdrop>

                <!-- Header -->
                <Control name="$(parent)Header">
                    <Dimensions y="40"/>
                    <Anchor point="TOPLEFT"/>
                    <Anchor point="TOPRIGHT"/>

                    <Controls>
                        <Label name="$(parent)Title" font="ZoFontWinH3" color="D4AF37" text="Sign Up">
                            <Anchor point="LEFT" offsetX="16"/>
                        </Label>

                        <Button name="$(parent)Close" inherits="ZO_CloseButton">
                            <Anchor point="TOPRIGHT" offsetX="-8" offsetY="8"/>
                            <OnClicked>
                                TamrielCalendar:HideSignUpDialog()
                            </OnClicked>
                        </Button>
                    </Controls>
                </Control>

                <!-- Event Info -->
                <Label name="$(parent)EventTitle" font="ZoFontWinH4">
                    <Anchor point="TOPLEFT" to="$(parent)Header" relativeTo="BOTTOMLEFT" offsetX="16" offsetY="8"/>
                    <Anchor point="TOPRIGHT" to="$(parent)Header" relativeTo="BOTTOMRIGHT" offsetX="-16"/>
                </Label>

                <Label name="$(parent)EventTime" font="ZoFontGameSmall" color="C5A552">
                    <Anchor point="TOPLEFT" to="$(parent)EventTitle" relativeTo="BOTTOMLEFT" offsetY="4"/>
                </Label>

                <!-- Role Selection -->
                <Label name="$(parent)RoleLabel" font="ZoFontGameSmall" text="Select your role:">
                    <Anchor point="TOPLEFT" to="$(parent)EventTime" relativeTo="BOTTOMLEFT" offsetY="16"/>
                </Label>

                <Control name="$(parent)RoleButtons">
                    <Anchor point="TOPLEFT" to="$(parent)RoleLabel" relativeTo="BOTTOMLEFT" offsetY="8"/>
                    <Anchor point="TOPRIGHT" to="$(parent)RoleLabel" relativeTo="BOTTOMRIGHT"/>
                    <Dimensions y="90"/>

                    <Controls>
                        <Button name="$(parent)TankBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("Tank")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Tank" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)HealerBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT" to="$(parent)TankBtn" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("Healer")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Healer" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>

                        <Button name="$(parent)DPSBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="280" y="26"/>
                            <Anchor point="TOPLEFT" to="$(parent)HealerBtn" relativeTo="BOTTOMLEFT" offsetY="4"/>
                            <OnClicked>
                                TamrielCalendar:OnRoleSelected("DPS")
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="DPS" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>

                <!-- Action Buttons -->
                <Control name="$(parent)Actions">
                    <Dimensions y="40"/>
                    <Anchor point="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT"/>

                    <Controls>
                        <Button name="$(parent)CancelBtn" inherits="ZO_DefaultButton">
                            <Dimensions x="80" y="28"/>
                            <Anchor point="CENTER"/>
                            <OnClicked>
                                TamrielCalendar:HideSignUpDialog()
                            </OnClicked>
                            <Controls>
                                <Label name="$(parent)Label" font="ZoFontGameSmall" text="Cancel" horizontalAlignment="CENTER" verticalAlignment="CENTER">
                                    <AnchorFill/>
                                </Label>
                            </Controls>
                        </Button>
                    </Controls>
                </Control>
            </Controls>
        </TopLevelControl>

    </Controls>
</GuiXml>
